
<div class="row">
  <div class="col-6">
    <h1>Numbers</h1>
  </div>
  <div class="col-6 text-right">
    <%= render partial: "search_form", locals: {country: 'GB'} %>
  </div>
</div>

<table class="table table-sm table-borderless table-striped table-hover">
      <thead>
        <tr>
          <th scope="col">Number</th>
          <th scope="col">Country</th>
          <th scope="col">Features</th>
          <th scope="col">&nbsp;</th>
        </tr>
      </thead>

      <tbody>
        <% @available_numbers.each do |number| %>
          <tr>
            <td><%= number.msisdn %></td>
            <td><%= number.country %></td>
            <td><%= number.features %></td>
            <td>
              <% if !number.features.include?("VOICE") %>
                No voice capability.
              <% elsif number.voiceCallbackValue.blank? %>
                <%= link_to "Assign", numbers_add_path(country: number.country, msisdn: number.msisdn), method: :post, class: 'btn btn-sm btn-danger' %>
              <% elsif number.voiceCallbackValue == @nexmo_app.app_id %>
                <strong>Linked.</strong>
                <%= link_to "Remove", numbers_remove_path(country: number.country, msisdn: number.msisdn), method: :post, class: 'btn btn-sm btn-warning' %>
              <% else %>
                Number already in use.
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>

<!-- 
<p><%=  @nexmo_app.app_id %></p>
<pre><%= @available_numbers.to_yaml %></pre>

-->